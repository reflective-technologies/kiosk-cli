{"id":"kiosk-cli-ek3","title":"MVP: kiosk CLI for Kiosk App Platform","description":"Steam for Claude Code Apps - CLI component for interacting with kiosk.app\n\n## Overview\n\nThe kiosk CLI enables users to:\n- Run Claude Code apps from the Kiosk marketplace\n- Publish their own apps to the platform\n- Manage locally installed apps\n\n## Key Concepts\n\n- Apps are hosted on GitHub but published/indexed via kiosk.app API\n- `~/.kiosk/` is the working directory (config + installed apps)\n- `org/repo` shorthand for referencing apps\n- KIOSK.md in repos contains Claude Code instructions for setup/run\n\n## Commands (MVP)\n\n- `kiosk run org/repo` - Install (if needed) and run an app\n- `kiosk publish` - Publish current repo to kiosk.app\n- `kiosk rm org/repo` - Remove a locally installed app\n- `kiosk ls` - List installed apps\n- `kiosk new` - Initialize a new kiosk app project\n\n## Deferred\n\n- `kiosk update` - Self-update CLI (needs CI/releases)","status":"open","priority":2,"issue_type":"epic","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:05:25.904613-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:05:25.904613-05:00"}
{"id":"kiosk-cli-ek3.1","title":"Initialize ~/.kiosk working directory and config","description":"## Summary\n\nCreate the foundational working directory structure at `~/.kiosk/` with config management.\n\n## Requirements\n\n- `~/.kiosk/` directory for all kiosk data\n- `~/.kiosk/config.json` for configuration\n- `~/.kiosk/apps/` for installed apps (cloned repos)\n\n## Config Schema (initial)\n\n```json\n{\n  \"apiUrl\": \"https://kiosk.app\",\n  \"appsDir\": \"~/.kiosk/apps\"\n}\n```\n\n## Behavior\n\n- Commands that need the working directory should check if it exists\n- If not, create it with sensible defaults\n- Provide a helper function/package for config access\n\n## Implementation Notes\n\n- Consider a `internal/config` package\n- Default apiUrl should be `https://kiosk.app` (override via config for dev)","status":"closed","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:06:07.287614-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:15:42.82384-05:00","closed_at":"2026-01-18T13:15:42.82384-05:00","close_reason":"Implemented internal/config package","dependencies":[{"issue_id":"kiosk-cli-ek3.1","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:06:07.288312-05:00","created_by":"Cole Brown"}]}
{"id":"kiosk-cli-ek3.2","title":"Implement 'kiosk run org/repo' command","description":"## Summary\n\nRun (install if needed, then run) a Claude Code app from the Kiosk marketplace.\n\n## Usage\n\n```bash\nkiosk run org/repo\n```\n\n## Behavior\n\n1. Ensure working directory is initialized (~/.kiosk/)\n2. Check if app is in the index (`~/.kiosk/apps.json`)\n\n### If app is NOT installed:\n1. Fetch app info from `GET /api/kiosk/[appId]` to verify it exists\n2. Call `GET /api/kiosk/[appId]/install` to get installation prompt\n3. Create directory `~/.kiosk/apps/org/repo`\n4. **Register app in index** with metadata from API\n5. Exec Claude Code with the install prompt (which handles cloning, setup, and running)\n\n### If app IS installed:\n1. cd into `~/.kiosk/apps/org/repo`\n2. Exec Claude Code with prompt to run the app (reference KIOSK.md)\n\n## API Endpoints\n\n- `GET /api/kiosk/[appId]` - Get app metadata\n- `GET /api/kiosk/[appId]/install` - Get installation prompt (plain text)\n\n## Implementation Notes\n\n- Use `internal/appindex` package to check/register apps\n- Map `org/repo` to appId (the app's slug in kiosk.app)\n- Shell out to `claude` CLI with the prompt\n- The install prompt handles git clone, setup, etc.","status":"closed","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:06:40.795046-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:32:15.263334-05:00","closed_at":"2026-01-18T13:32:15.263334-05:00","close_reason":"Implemented run command with API client and Claude exec","dependencies":[{"issue_id":"kiosk-cli-ek3.2","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:06:40.795724-05:00","created_by":"Cole Brown"}]}
{"id":"kiosk-cli-ek3.3","title":"Implement 'kiosk publish' command","description":"## Summary\n\nPublish the current repository to kiosk.app marketplace.\n\n## Usage\n\n```bash\nkiosk publish\n# Run from within a git repo with a GitHub remote\n```\n\n## Behavior\n\n1. Ensure working directory is initialized (~/.kiosk/)\n2. Call `GET /api/create` to fetch the publishing prompt (plain text)\n3. Exec Claude Code with the prompt\n4. Claude Code will:\n   - Auto-detect project info (package.json, README, git remote, etc.)\n   - Check for Kiosk.md (help create one if missing)\n   - Confirm details with user\n   - Call `POST /api/kiosk` to publish\n   - Output kiosk.app link\n\n## API Endpoints\n\n- `GET /api/create` - Returns plain text prompt for Claude Code\n- `POST /api/kiosk` - Creates the app entry (called by Claude Code)\n\n## Implementation Notes\n\n- Fetch prompt from API, pass to `claude` CLI\n- The prompt handles all the interactive flow\n- CLI just needs to bootstrap the process","status":"closed","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:06:41.209255-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:39:37.680736-05:00","closed_at":"2026-01-18T13:39:37.680736-05:00","close_reason":"Implemented publish command","dependencies":[{"issue_id":"kiosk-cli-ek3.3","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:06:41.20999-05:00","created_by":"Cole Brown"}]}
{"id":"kiosk-cli-ek3.4","title":"Implement 'kiosk rm org/repo' command","description":"## Summary\n\nRemove a locally installed app.\n\n## Usage\n\n```bash\nkiosk rm org/repo\n```\n\n## Behavior\n\n1. Check if app is in the index (`~/.kiosk/apps.json`)\n2. If not in index, show error message\n3. If in index, prompt for confirmation (or use --force flag)\n4. **Remove from index** and delete the directory at `~/.kiosk/apps/org/repo`\n\n## Implementation Notes\n\n- Use `internal/appindex` package to check/unregister apps\n- Consider --force flag to skip confirmation\n- Should NOT remove from kiosk.app (that would be unpublish)\n- Handle case where directory is missing but app is in index (just clean up index)","status":"closed","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:06:41.612562-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:24:20.522731-05:00","closed_at":"2026-01-18T13:24:20.522731-05:00","close_reason":"Implemented rm command with --force flag","dependencies":[{"issue_id":"kiosk-cli-ek3.4","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:06:41.613578-05:00","created_by":"Cole Brown"}]}
{"id":"kiosk-cli-ek3.5","title":"Implement 'kiosk ls' command","description":"## Summary\n\nList locally installed apps from the app index.\n\n## Usage\n\n```bash\nkiosk ls\n```\n\n## App Index\n\nApps are tracked in `~/.kiosk/apps.json`:\n\n```json\n{\n  \"apps\": {\n    \"org/repo\": {\n      \"name\": \"App Name\",\n      \"description\": \"Short description\",\n      \"gitUrl\": \"https://github.com/org/repo\",\n      \"installedAt\": \"2026-01-18T12:00:00Z\",\n      \"updatedAt\": \"2026-01-18T12:00:00Z\"\n    }\n  }\n}\n```\n\n## Behavior\n\n1. Load app index from `~/.kiosk/apps.json`\n2. For each app in index, validate directory exists at `~/.kiosk/apps/org/repo`\n3. Display list with status (installed / missing)\n4. Print count at the end\n\n## Output Format\n\n```\nInstalled apps:\n\n  anthropic/claude-starter\n  reflective-technologies/cool-app\n\n2 apps installed\n```\n\nEmpty state:\n```\nNo apps installed.\n```\n\n## Implementation Notes\n\n- Create `internal/appindex` package for index management\n- Index is source of truth; filesystem is validated against it\n- Other commands (run, rm) will use this package to register/unregister apps","status":"closed","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:06:41.947476-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:20:34.140385-05:00","closed_at":"2026-01-18T13:20:34.140385-05:00","close_reason":"Implemented appindex package and ls command","dependencies":[{"issue_id":"kiosk-cli-ek3.5","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:06:41.948167-05:00","created_by":"Cole Brown"}]}
{"id":"kiosk-cli-ek3.6","title":"Implement 'kiosk new' command","description":"## Summary\n\nInitialize a new Kiosk app project with templates.\n\n## Usage\n\n```bash\nkiosk new\n# or\nkiosk new my-app-name\n```\n\n## Behavior\n\n1. Create project directory (if name provided)\n2. Initialize with KIOSK.md template\n3. Possibly other starter files\n\n## Open Questions\n\n- What should KIOSK.md template contain?\n- Should we initialize a git repo?\n- Any other starter files (README, .gitignore)?\n- Reference kiosk-four for existing guidelines\n\n## Notes\n\nLeave implementation details open-ended - we'll figure out the best template structure together during implementation.","status":"closed","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:06:42.319791-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:45:59.60096-05:00","closed_at":"2026-01-18T13:45:59.60096-05:00","close_reason":"Implemented new command with KIOSK.md template","dependencies":[{"issue_id":"kiosk-cli-ek3.6","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:06:42.320555-05:00","created_by":"Cole Brown"}]}
{"id":"kiosk-cli-ek3.7","title":"Implement 'kiosk config' command","description":"## Summary\n\nManage kiosk CLI configuration via command line.\n\n## Usage\n\n```bash\n# Get a config value\nkiosk config get apiUrl\n\n# Set a config value\nkiosk config set apiUrl http://localhost:3000\n\n# Show all config\nkiosk config list\n```\n\n## Behavior\n\n- Uses JSON path syntax for nested values (if we add them later)\n- Reads/writes to `~/.kiosk/config.json`\n- `set` creates the config file if it doesn't exist\n\n## Examples\n\n```bash\n# Switch to local dev server\nkiosk config set apiUrl http://localhost:3000\n\n# Switch back to production\nkiosk config set apiUrl https://kiosk.app\n\n# Check current config\nkiosk config list\n```\n\n## Implementation Notes\n\n- Subcommands: `get`, `set`, `list`\n- Initialize working directory if needed\n- Pretty print for `list` output","status":"closed","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:11:45.926295-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:15:42.889717-05:00","closed_at":"2026-01-18T13:15:42.889717-05:00","close_reason":"Implemented kiosk config command","dependencies":[{"issue_id":"kiosk-cli-ek3.7","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:11:45.928485-05:00","created_by":"Cole Brown"}]}
{"id":"kiosk-cli-ek3.8","title":"Investigate claude CLI not found when exec'ing from kiosk","description":"## Problem\n\nWhen running `kiosk publish` or `kiosk run`, the exec'd `claude` command fails with:\n```\nError: exec: \"claude\": executable file not found in $PATH\n```\n\nHowever, `claude` is installed and works in the user's shell (we're using it right now).\n\n## Likely Cause\n\nThe Go `exec.Command` may not be inheriting the full shell PATH, especially if:\n- claude is installed via a version manager or non-standard location\n- PATH is set in shell config (.zshrc, .bashrc) but not in the login environment\n\n## Potential Fixes\n\n1. Use absolute path to claude (detect with `which claude` first)\n2. Explicitly inherit PATH from parent process\n3. Run through a shell: `exec.Command(\"sh\", \"-c\", \"claude ...\")`\n4. Document that claude must be in system PATH\n\n## To Investigate\n\n- Check where claude is installed: `which claude`\n- Check if PATH differs between shell and Go exec\n- Test with absolute path","status":"open","priority":2,"issue_type":"task","owner":"bigswim@gmail.com","created_at":"2026-01-18T13:41:09.926864-05:00","created_by":"Cole Brown","updated_at":"2026-01-18T13:41:09.926864-05:00","dependencies":[{"issue_id":"kiosk-cli-ek3.8","depends_on_id":"kiosk-cli-ek3","type":"parent-child","created_at":"2026-01-18T13:41:09.927527-05:00","created_by":"Cole Brown"}]}
